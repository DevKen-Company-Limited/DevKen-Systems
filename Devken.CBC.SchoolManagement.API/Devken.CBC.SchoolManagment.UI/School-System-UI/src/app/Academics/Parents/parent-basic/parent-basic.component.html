<div class="max-w-6xl">

  <!-- Section Header -->
  <div class="flex items-start gap-4 mb-8">
    <div class="flex items-center justify-center w-14 h-14 rounded-xl bg-gradient-to-br from-teal-500 to-emerald-600 shadow-lg">
      <mat-icon class="text-white !w-7 !h-7">person</mat-icon>
    </div>
    <div class="flex-1">
      <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-1">Basic Information</h2>
      <p class="text-gray-600 dark:text-gray-400">
        {{ isEditMode
          ? 'Update the parent\'s full name and relationship.'
          : 'Enter the parent or guardian\'s basic details. Fields marked * are required.' }}
      </p>
    </div>
  </div>

  <!-- Info Alert -->
  <fuse-alert *ngIf="!isEditMode" type="info" appearance="soft" [showIcon]="true" class="mb-6">
    <strong>Getting Started:</strong> Provide the full name and relationship type. Middle name is optional.
  </fuse-alert>

  <form [formGroup]="form" novalidate class="space-y-6">

    <!-- School Assignment (SuperAdmin only) -->
    <mat-card *ngIf="isSuperAdmin" class="shadow-md">
      <mat-card-header class="!pb-2">
        <mat-card-title class="!text-base !font-semibold flex items-center gap-2">
          <mat-icon class="text-teal-600">apartment</mat-icon>
          School Assignment
          <span class="ml-auto text-xs font-medium px-2 py-1 bg-red-100 text-red-700
                       dark:bg-red-900/30 dark:text-red-300 rounded">Required</span>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content class="!pt-4">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>School *</mat-label>
          <mat-select formControlName="tenantId">
            <mat-option value="">— Select school —</mat-option>
            <mat-option *ngFor="let school of schools" [value]="school.id">
              {{ school.name }}
            </mat-option>
          </mat-select>
          <mat-icon matPrefix class="text-gray-400">apartment</mat-icon>
          <mat-hint>The school this parent belongs to</mat-hint>
          <mat-error>{{ getError('tenantId') }}</mat-error>
        </mat-form-field>
      </mat-card-content>
    </mat-card>

    <!-- Name Fields -->
    <mat-card class="shadow-md">
      <mat-card-header class="!pb-2">
        <mat-card-title class="!text-base !font-semibold flex items-center gap-2">
          <mat-icon class="text-teal-600">badge</mat-icon>
          Full Name
          <span class="ml-auto text-xs font-medium px-2 py-1 bg-red-100 text-red-700
                       dark:bg-red-900/30 dark:text-red-300 rounded">Required</span>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content class="!pt-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">

          <mat-form-field appearance="outline">
            <mat-label>First Name *</mat-label>
            <input matInput formControlName="firstName" placeholder="e.g. John">
            <mat-icon matPrefix class="text-gray-400">badge</mat-icon>
            <mat-error>{{ getError('firstName') }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Middle Name</mat-label>
            <input matInput formControlName="middleName" placeholder="Optional">
            <mat-icon matPrefix class="text-gray-400">badge</mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Last Name *</mat-label>
            <input matInput formControlName="lastName" placeholder="e.g. Doe">
            <mat-icon matPrefix class="text-gray-400">badge</mat-icon>
            <mat-error>{{ getError('lastName') }}</mat-error>
          </mat-form-field>

        </div>
      </mat-card-content>
    </mat-card>

    <!-- Relationship -->
    <mat-card class="shadow-md">
      <mat-card-header class="!pb-2">
        <mat-card-title class="!text-base !font-semibold flex items-center gap-2">
          <mat-icon class="text-teal-600">family_restroom</mat-icon>
          Relationship to Student
          <span class="ml-auto text-xs font-medium px-2 py-1 bg-red-100 text-red-700
                       dark:bg-red-900/30 dark:text-red-300 rounded">Required</span>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content class="!pt-4">
        <mat-form-field appearance="outline" class="w-full md:w-1/2">
          <mat-label>Relationship *</mat-label>
          <mat-select formControlName="relationship">
            <mat-option *ngFor="let rel of relationships" [value]="rel.value">
              {{ rel.label }}
            </mat-option>
          </mat-select>
          <mat-icon matPrefix class="text-gray-400">family_restroom</mat-icon>
          <mat-error>{{ getError('relationship') }}</mat-error>
        </mat-form-field>
      </mat-card-content>
    </mat-card>

  </form>
</div>