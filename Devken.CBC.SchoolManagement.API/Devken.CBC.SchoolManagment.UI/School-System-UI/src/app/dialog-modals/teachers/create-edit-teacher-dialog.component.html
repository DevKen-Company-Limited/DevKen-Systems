<!-- ══════════════════════════════════════════════════════════════════════════ -->
<!-- Reusable Form Dialog Component -->
<!-- ══════════════════════════════════════════════════════════════════════════ -->
<app-form-dialog
  [header]="dialogHeader"
  [tabs]="dialogTabs"
  [form]="form"
  [activeTab]="activeTab"
  [photoConfig]="photoConfig"
  [footer]="footerConfig"
  [tabTemplates]="tabTemplates"
  [formSubmitted]="formSubmitted"
  (tabChange)="onTabChange($event)"
  (cancel)="onCancel()"
  (submit)="onSubmit()">
</app-form-dialog>

<!-- ══════════════════════════════════════════════════════════════════════════ -->
<!-- Tab Content Templates -->
<!-- ══════════════════════════════════════════════════════════════════════════ -->

<!-- ── Personal Tab ─────────────────────────────────────────────────────────── -->
<ng-template #personalTab>
  
  <!-- First Name -->
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>First Name <span class="text-red-500">*</span></mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">badge</mat-icon>
    <input matInput formControlName="firstName" placeholder="e.g. John" />
    <mat-error *ngIf="form.get('firstName')?.hasError('required')">Required</mat-error>
  </mat-form-field>

  <!-- Middle Name -->
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>Middle Name</mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">badge</mat-icon>
    <input matInput formControlName="middleName" placeholder="Optional" />
  </mat-form-field>

  <!-- Last Name -->
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>Last Name <span class="text-red-500">*</span></mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">badge</mat-icon>
    <input matInput formControlName="lastName" placeholder="e.g. Doe" />
    <mat-error *ngIf="form.get('lastName')?.hasError('required')">Required</mat-error>
  </mat-form-field>

  <!-- Teacher Number -->
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>Teacher Number <span class="text-red-500">*</span></mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">tag</mat-icon>
    <input matInput formControlName="teacherNumber" placeholder="e.g. TCH-001" />
    <mat-error *ngIf="form.get('teacherNumber')?.hasError('required')">Required</mat-error>
  </mat-form-field>

  <!-- Gender -->
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>Gender <span class="text-red-500">*</span></mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">wc</mat-icon>
    <mat-select formControlName="gender">
      <mat-option *ngFor="let g of (genders$ | async)" [value]="g.value">{{ g.name }}</mat-option>
    </mat-select>
    <mat-error *ngIf="form.get('gender')?.hasError('required')">Required</mat-error>
  </mat-form-field>

  <!-- Date of Birth -->
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>Date of Birth</mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">cake</mat-icon>
    <input matInput [matDatepicker]="dobPicker" formControlName="dateOfBirth" />
    <mat-datepicker-toggle matIconSuffix [for]="dobPicker"></mat-datepicker-toggle>
    <mat-datepicker #dobPicker></mat-datepicker>
  </mat-form-field>

  <!-- National ID -->
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>National ID Number</mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">credit_card</mat-icon>
    <input matInput formControlName="idNumber" placeholder="National ID / Passport" />
  </mat-form-field>

  <!-- Nationality -->
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>Nationality</mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">flag</mat-icon>
    <input matInput formControlName="nationality" placeholder="e.g. Kenyan" />
  </mat-form-field>

</ng-template>

<!-- ── Contact Tab ──────────────────────────────────────────────────────────── -->
<ng-template #contactTab>

  <!-- Phone -->
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>Phone Number</mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">phone</mat-icon>
    <input matInput formControlName="phoneNumber" placeholder="+254 7XX XXX XXX" />
  </mat-form-field>

  <!-- Email -->
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>Email Address</mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">email</mat-icon>
    <input matInput type="email" formControlName="email" placeholder="teacher@school.ac.ke" />
    <mat-error *ngIf="form.get('email')?.hasError('email')">Enter a valid email</mat-error>
  </mat-form-field>

  <!-- Address -->
  <mat-form-field class="w-full md:col-span-2" appearance="outline">
    <mat-label>Home Address</mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">home</mat-icon>
    <textarea matInput formControlName="address" rows="3" placeholder="Postal address or physical location"></textarea>
  </mat-form-field>

</ng-template>

<!-- ── Professional Tab ─────────────────────────────────────────────────────── -->
<ng-template #professionalTab>

  <!-- TSC Number -->
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>TSC Number</mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">school</mat-icon>
    <input matInput formControlName="tscNumber" placeholder="Teachers Service Commission No." />
  </mat-form-field>

  <!-- Employment Type -->
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>Employment Type</mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">work</mat-icon>
    <mat-select formControlName="employmentType">
      <mat-option *ngFor="let et of (employmentTypes$ | async)" [value]="et.value">{{ et.name }}</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Designation -->
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>Designation</mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">military_tech</mat-icon>
    <mat-select formControlName="designation">
      <mat-option *ngFor="let d of (designations$ | async)" [value]="d.value">{{ d.name }}</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Date of Employment -->
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>Date of Employment</mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">event</mat-icon>
    <input matInput [matDatepicker]="empPicker" formControlName="dateOfEmployment" />
    <mat-datepicker-toggle matIconSuffix [for]="empPicker"></mat-datepicker-toggle>
    <mat-datepicker #empPicker></mat-datepicker>
  </mat-form-field>

  <!-- Qualification -->
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>Qualification</mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">menu_book</mat-icon>
    <input matInput formControlName="qualification" placeholder="e.g. B.Ed, PGDE" />
  </mat-form-field>

  <!-- Specialization -->
  <mat-form-field class="w-full" appearance="outline">
    <mat-label>Specialization</mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">science</mat-icon>
    <input matInput formControlName="specialization" placeholder="e.g. Mathematics, Science" />
  </mat-form-field>

  <!-- Is Class Teacher -->
  <div class="md:col-span-2 flex items-center gap-3 p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700">
    <mat-slide-toggle formControlName="isClassTeacher" color="primary"></mat-slide-toggle>
    <div>
      <p class="text-sm font-semibold text-gray-700 dark:text-gray-300">Class Teacher</p>
      <p class="text-xs text-gray-500 dark:text-gray-400">This teacher is assigned as a class teacher</p>
    </div>
  </div>

  <!-- Is Active -->
  <div class="md:col-span-2 flex items-center gap-3 p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700">
    <mat-slide-toggle formControlName="isActive" color="primary"></mat-slide-toggle>
    <div>
      <p class="text-sm font-semibold text-gray-700 dark:text-gray-300">Active Status</p>
      <p class="text-xs text-gray-500 dark:text-gray-400">Toggle to activate or deactivate this teacher</p>
    </div>
  </div>

  <!-- Notes -->
  <mat-form-field class="w-full md:col-span-2" appearance="outline">
    <mat-label>Notes</mat-label>
    <mat-icon matPrefix class="icon-size-5 mr-2 text-gray-400">notes</mat-icon>
    <textarea matInput formControlName="notes" rows="3" placeholder="Any additional notes..."></textarea>
  </mat-form-field>

</ng-template>