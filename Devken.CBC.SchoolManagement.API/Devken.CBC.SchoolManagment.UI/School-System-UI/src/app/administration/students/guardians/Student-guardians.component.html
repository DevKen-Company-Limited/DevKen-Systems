<!-- Student Guardians Component - Fuse/Material + Tailwind -->
<div class="max-w-6xl">

  <!-- Section Header -->
  <div class="flex items-start gap-4 mb-8">
    <div class="flex items-center justify-center w-14 h-14 rounded-xl bg-gradient-to-br from-purple-500 to-indigo-600 shadow-lg">
      <mat-icon class="text-white !w-7 !h-7" svgIcon="heroicons_outline:users"></mat-icon>
    </div>
    <div class="flex-1">
      <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-1">Guardian & Emergency Contacts</h2>
      <p class="text-gray-600 dark:text-gray-400">Primary guardian is required. Secondary and emergency contacts are optional.</p>
    </div>
  </div>

  <form [formGroup]="form" novalidate class="space-y-6">

    <!-- Primary Guardian -->
    <mat-card class="shadow-md">
      <mat-card-header class="!pb-2">
        <mat-card-title class="!text-base !font-semibold flex items-center gap-2">
          <mat-icon svgIcon="heroicons_outline:user-circle" class="text-purple-600"></mat-icon>
          Primary Guardian
          <span class="ml-auto text-xs font-medium px-2 py-1 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 rounded">Required</span>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content class="!pt-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Full Name *</mat-label>
            <input matInput formControlName="primaryGuardianName" placeholder="e.g. John Mwangi">
            <mat-icon matPrefix svgIcon="heroicons_outline:user" class="text-gray-400"></mat-icon>
            <mat-error>Guardian name is required</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Relationship *</mat-label>
            <mat-select formControlName="primaryGuardianRelationship">
              <mat-option value="">Select relationship</mat-option>
              <mat-option value="Father">Father</mat-option>
              <mat-option value="Mother">Mother</mat-option>
              <mat-option value="Guardian">Guardian</mat-option>
              <mat-option value="Uncle">Uncle</mat-option>
              <mat-option value="Aunt">Aunt</mat-option>
              <mat-option value="Grandparent">Grandparent</mat-option>
              <mat-option value="Other">Other</mat-option>
            </mat-select>
            <mat-icon matPrefix svgIcon="heroicons_outline:heart" class="text-gray-400"></mat-icon>
            <mat-error>Relationship is required</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Phone Number *</mat-label>
            <input matInput formControlName="primaryGuardianPhone" placeholder="+254 7XX XXX XXX">
            <mat-icon matPrefix svgIcon="heroicons_outline:phone" class="text-gray-400"></mat-icon>
            <mat-error>Phone number is required</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Email Address</mat-label>
            <input matInput type="email" formControlName="primaryGuardianEmail" placeholder="email@example.com">
            <mat-icon matPrefix svgIcon="heroicons_outline:envelope" class="text-gray-400"></mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Occupation</mat-label>
            <input matInput formControlName="primaryGuardianOccupation" placeholder="e.g. Teacher, Farmer">
            <mat-icon matPrefix svgIcon="heroicons_outline:briefcase" class="text-gray-400"></mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Address</mat-label>
            <input matInput formControlName="primaryGuardianAddress" placeholder="Residential address">
            <mat-icon matPrefix svgIcon="heroicons_outline:map-pin" class="text-gray-400"></mat-icon>
          </mat-form-field>

        </div>
      </mat-card-content>
    </mat-card>

    <!-- Secondary Guardian (Expandable) -->
    <mat-card class="shadow-md">
      <mat-card-header class="!pb-0">
        <button 
          mat-button 
          type="button"
          class="!w-full !justify-start !text-left !h-auto !py-4"
          (click)="showSecondary = !showSecondary">
          <div class="flex items-center gap-2 w-full">
            <mat-icon [svgIcon]="showSecondary ? 'heroicons_outline:minus' : 'heroicons_outline:plus'" class="text-purple-600"></mat-icon>
            <span class="font-semibold text-gray-900 dark:text-white">{{ showSecondary ? 'Hide' : 'Add' }} Secondary Guardian (Optional)</span>
          </div>
        </button>
      </mat-card-header>

      <mat-card-content *ngIf="showSecondary" class="!pt-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Full Name</mat-label>
            <input matInput formControlName="secondaryGuardianName" placeholder="Full name">
            <mat-icon matPrefix svgIcon="heroicons_outline:user" class="text-gray-400"></mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Relationship</mat-label>
            <mat-select formControlName="secondaryGuardianRelationship">
              <mat-option value="">Select relationship</mat-option>
              <mat-option value="Father">Father</mat-option>
              <mat-option value="Mother">Mother</mat-option>
              <mat-option value="Guardian">Guardian</mat-option>
              <mat-option value="Uncle">Uncle</mat-option>
              <mat-option value="Aunt">Aunt</mat-option>
              <mat-option value="Grandparent">Grandparent</mat-option>
              <mat-option value="Other">Other</mat-option>
            </mat-select>
            <mat-icon matPrefix svgIcon="heroicons_outline:heart" class="text-gray-400"></mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Phone Number</mat-label>
            <input matInput formControlName="secondaryGuardianPhone" placeholder="+254 7XX XXX XXX">
            <mat-icon matPrefix svgIcon="heroicons_outline:phone" class="text-gray-400"></mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Email</mat-label>
            <input matInput type="email" formControlName="secondaryGuardianEmail" placeholder="email@example.com">
            <mat-icon matPrefix svgIcon="heroicons_outline:envelope" class="text-gray-400"></mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Occupation</mat-label>
            <input matInput formControlName="secondaryGuardianOccupation" placeholder="e.g. Engineer">
            <mat-icon matPrefix svgIcon="heroicons_outline:briefcase" class="text-gray-400"></mat-icon>
          </mat-form-field>

        </div>
      </mat-card-content>
    </mat-card>

    <!-- Emergency Contact -->
    <mat-card class="shadow-md">
      <mat-card-header class="!pb-2">
        <mat-card-title class="!text-base !font-semibold flex items-center gap-2">
          <mat-icon svgIcon="heroicons_outline:phone" class="text-purple-600"></mat-icon>
          Emergency Contact
        </mat-card-title>
      </mat-card-header>
      <mat-card-content class="!pt-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Name</mat-label>
            <input matInput formControlName="emergencyContactName" placeholder="Full name">
            <mat-icon matPrefix svgIcon="heroicons_outline:user" class="text-gray-400"></mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Phone</mat-label>
            <input matInput formControlName="emergencyContactPhone" placeholder="+254 7XX XXX XXX">
            <mat-icon matPrefix svgIcon="heroicons_outline:phone" class="text-gray-400"></mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Relationship</mat-label>
            <input matInput formControlName="emergencyContactRelationship" placeholder="e.g. Aunt">
            <mat-icon matPrefix svgIcon="heroicons_outline:heart" class="text-gray-400"></mat-icon>
          </mat-form-field>

        </div>
      </mat-card-content>
    </mat-card>

  </form>

</div>