<!-- Student Review Component - Fuse/Material + Tailwind -->
<div class="max-w-6xl">

  <!-- Section Header -->
  <div class="flex items-start gap-4 mb-8">
    <div class="flex items-center justify-center w-14 h-14 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 shadow-lg">
      <mat-icon class="text-white !w-7 !h-7" svgIcon="heroicons_outline:check-badge"></mat-icon>
    </div>
    <div class="flex-1">
      <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-1">Review & Submit</h2>
      <p class="text-gray-600 dark:text-gray-400">Review all information before submitting. Click any section to edit.</p>
    </div>
  </div>

  <!-- Completion Progress -->
  <div class="mb-6">
    <div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-2">
      <div 
        class="h-full bg-gradient-to-r from-green-500 to-emerald-600 transition-all duration-500"
        [style.width.%]="getCompletionPct()">
      </div>
    </div>
    <div class="text-sm text-gray-600 dark:text-gray-400">
      {{ completedCount() }} of {{ steps.length - 1 }} sections completed
    </div>
  </div>

  <!-- Incomplete Warning -->
  <fuse-alert 
    *ngIf="!allComplete()"
    type="warning" 
    appearance="soft"
    [showIcon]="true"
    class="mb-6">
    Some sections are incomplete. Please go back and fill in the required fields before submitting.
  </fuse-alert>

  <!-- Section Summaries -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

    <!-- Personal Info -->
    <mat-card class="shadow-md hover:shadow-lg transition-shadow cursor-pointer" (click)="editSection.emit(0)">
      <mat-card-header class="!pb-2">
        <div class="flex items-center justify-between w-full">
          <div class="flex items-center gap-3">
            <div class="flex items-center justify-center w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/20">
              <mat-icon class="text-blue-600" svgIcon="heroicons_outline:user"></mat-icon>
            </div>
            <mat-card-title class="!text-base !font-semibold !mb-0">Personal Information</mat-card-title>
          </div>
          <div class="flex items-center gap-2">
            <span 
              class="text-xs font-medium px-2 py-1 rounded"
              [class.bg-green-100]="isComplete(0)"
              [class.text-green-700]="isComplete(0)"
              [class.dark:bg-green-30]="isComplete(0)"
              [class.dark:text-green-300]="isComplete(0)"
              [class.bg-gray-100]="!isComplete(0)"
              [class.text-gray-600]="!isComplete(0)"
              [class.dark:bg-gray-700]="!isComplete(0)"
              [class.dark:text-gray-400]="!isComplete(0)">
              {{ isComplete(0) ? '✓ Complete' : 'Incomplete' }}
            </span>
            <mat-icon class="text-gray-400" svgIcon="heroicons_outline:pencil"></mat-icon>
          </div>
        </div>
      </mat-card-header>
      <mat-card-content class="!pt-4">
        <div class="space-y-2">
          <div class="flex justify-between text-sm">
            <span class="text-gray-600 dark:text-gray-400">Full Name</span>
            <span class="font-medium text-gray-900 dark:text-white">{{ fullName }}</span>
          </div>
          <div class="flex justify-between text-sm">
            <span class="text-gray-600 dark:text-gray-400">Admission No.</span>
            <span class="font-medium text-gray-900 dark:text-white">{{ formSections.personal?.admissionNumber || '—' }}</span>
          </div>
          <div class="flex justify-between text-sm">
            <span class="text-gray-600 dark:text-gray-400">Date of Birth</span>
            <span class="font-medium text-gray-900 dark:text-white">{{ formatDate(formSections.personal?.dateOfBirth) }}</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Location -->
    <mat-card class="shadow-md hover:shadow-lg transition-shadow cursor-pointer" (click)="editSection.emit(1)">
      <mat-card-header class="!pb-2">
        <div class="flex items-center justify-between w-full">
          <div class="flex items-center gap-3">
            <div class="flex items-center justify-center w-10 h-10 rounded-lg bg-cyan-100 dark:bg-cyan-900/20">
              <mat-icon class="text-cyan-600" svgIcon="heroicons_outline:map-pin"></mat-icon>
            </div>
            <mat-card-title class="!text-base !font-semibold !mb-0">Location</mat-card-title>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-xs font-medium px-2 py-1 rounded bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300">
              ✓ Saved
            </span>
            <mat-icon class="text-gray-400" svgIcon="heroicons_outline:pencil"></mat-icon>
          </div>
        </div>
      </mat-card-header>
      <mat-card-content class="!pt-4">
        <div class="space-y-2">
          <div class="flex justify-between text-sm">
            <span class="text-gray-600 dark:text-gray-400">County</span>
            <span class="font-medium text-gray-900 dark:text-white">{{ formSections.location?.county || '—' }}</span>
          </div>
          <div class="flex justify-between text-sm">
            <span class="text-gray-600 dark:text-gray-400">Sub-County</span>
            <span class="font-medium text-gray-900 dark:text-white">{{ formSections.location?.subCounty || '—' }}</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Academic -->
    <mat-card class="shadow-md hover:shadow-lg transition-shadow cursor-pointer" (click)="editSection.emit(2)">
      <mat-card-header class="!pb-2">
        <div class="flex items-center justify-between w-full">
          <div class="flex items-center gap-3">
            <div class="flex items-center justify-center w-10 h-10 rounded-lg bg-orange-100 dark:bg-orange-900/20">
              <mat-icon class="text-orange-600" svgIcon="heroicons_outline:academic-cap"></mat-icon>
            </div>
            <mat-card-title class="!text-base !font-semibold !mb-0">Academic</mat-card-title>
          </div>
          <div class="flex items-center gap-2">
            <span 
              class="text-xs font-medium px-2 py-1 rounded"
              [class.bg-green-100]="isComplete(2)"
              [class.text-green-700]="isComplete(2)"
              [class.dark:bg-green-30]="isComplete(2)"
              [class.dark:text-green-300]="isComplete(2)"
              [class.bg-gray-100]="!isComplete(2)"
              [class.text-gray-600]="!isComplete(2)"
              [class.dark:bg-gray-700]="!isComplete(2)"
              [class.dark:text-gray-400]="!isComplete(2)">
              {{ isComplete(2) ? '✓ Complete' : 'Incomplete' }}
            </span>
            <mat-icon class="text-gray-400" svgIcon="heroicons_outline:pencil"></mat-icon>
          </div>
        </div>
      </mat-card-header>
      <mat-card-content class="!pt-4">
        <div class="space-y-2">
          <div class="flex justify-between text-sm">
            <span class="text-gray-600 dark:text-gray-400">Level</span>
            <span class="font-medium text-gray-900 dark:text-white">{{ formSections.academic?.currentLevel || '—' }}</span>
          </div>
          <div class="flex justify-between text-sm">
            <span class="text-gray-600 dark:text-gray-400">Previous School</span>
            <span class="font-medium text-gray-900 dark:text-white">{{ formSections.academic?.previousSchool || 'N/A' }}</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Medical -->
    <mat-card class="shadow-md hover:shadow-lg transition-shadow cursor-pointer" (click)="editSection.emit(3)">
      <mat-card-header class="!pb-2">
        <div class="flex items-center justify-between w-full">
          <div class="flex items-center gap-3">
            <div class="flex items-center justify-center w-10 h-10 rounded-lg bg-pink-100 dark:bg-pink-900/20">
              <mat-icon class="text-pink-600" svgIcon="heroicons_outline:heart"></mat-icon>
            </div>
            <mat-card-title class="!text-base !font-semibold !mb-0">Medical</mat-card-title>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-xs font-medium px-2 py-1 rounded bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300">
              ✓ Saved
            </span>
            <mat-icon class="text-gray-400" svgIcon="heroicons_outline:pencil"></mat-icon>
          </div>
        </div>
      </mat-card-header>
      <mat-card-content class="!pt-4">
        <div class="space-y-2">
          <div class="flex justify-between text-sm">
            <span class="text-gray-600 dark:text-gray-400">Blood Group</span>
            <span class="font-medium text-gray-900 dark:text-white">{{ formSections.medical?.bloodGroup || '—' }}</span>
          </div>
          <div class="flex justify-between text-sm">
            <span class="text-gray-600 dark:text-gray-400">Special Support</span>
            <span class="font-medium text-gray-900 dark:text-white">{{ formSections.medical?.requiresSpecialSupport ? 'Yes' : 'No' }}</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Guardians (Full Width) -->
    <mat-card class="shadow-md hover:shadow-lg transition-shadow cursor-pointer lg:col-span-2" (click)="editSection.emit(4)">
      <mat-card-header class="!pb-2">
        <div class="flex items-center justify-between w-full">
          <div class="flex items-center gap-3">
            <div class="flex items-center justify-center w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/20">
              <mat-icon class="text-purple-600" svgIcon="heroicons_outline:users"></mat-icon>
            </div>
            <mat-card-title class="!text-base !font-semibold !mb-0">Guardians & Contacts</mat-card-title>
          </div>
          <div class="flex items-center gap-2">
            <span 
              class="text-xs font-medium px-2 py-1 rounded"
              [class.bg-green-100]="isComplete(4)"
              [class.text-green-700]="isComplete(4)"
              [class.dark:bg-green-30]="isComplete(4)"
              [class.dark:text-green-300]="isComplete(4)"
              [class.bg-gray-100]="!isComplete(4)"
              [class.text-gray-600]="!isComplete(4)"
              [class.dark:bg-gray-700]="!isComplete(4)"
              [class.dark:text-gray-400]="!isComplete(4)">
              {{ isComplete(4) ? '✓ Complete' : 'Incomplete' }}
            </span>
            <mat-icon class="text-gray-400" svgIcon="heroicons_outline:pencil"></mat-icon>
          </div>
        </div>
      </mat-card-header>
      <mat-card-content class="!pt-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div>
            <div class="text-xs text-gray-600 dark:text-gray-400 mb-1">Guardian Name</div>
            <div class="font-medium text-gray-900 dark:text-white">{{ formSections.guardians?.primaryGuardianName || '—' }}</div>
          </div>
          <div>
            <div class="text-xs text-gray-600 dark:text-gray-400 mb-1">Relationship</div>
            <div class="font-medium text-gray-900 dark:text-white">{{ formSections.guardians?.primaryGuardianRelationship || '—' }}</div>
          </div>
          <div>
            <div class="text-xs text-gray-600 dark:text-gray-400 mb-1">Phone</div>
            <div class="font-medium text-gray-900 dark:text-white">{{ formSections.guardians?.primaryGuardianPhone || '—' }}</div>
          </div>
          <div>
            <div class="text-xs text-gray-600 dark:text-gray-400 mb-1">Email</div>
            <div class="font-medium text-gray-900 dark:text-white truncate">{{ formSections.guardians?.primaryGuardianEmail || '—' }}</div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

  </div>

</div>