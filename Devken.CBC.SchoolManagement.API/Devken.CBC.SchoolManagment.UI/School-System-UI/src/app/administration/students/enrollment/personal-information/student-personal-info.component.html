<!-- Student Personal Information Component -->
<div class="max-w-6xl">

  <!-- Section Header -->
  <div class="flex items-start gap-4 mb-8">
    <div class="flex items-center justify-center w-14 h-14 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 shadow-lg">
      <mat-icon class="text-white !w-7 !h-7" svgIcon="heroicons_outline:user"></mat-icon>
    </div>
    <div class="flex-1">
      <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-1">Personal Information</h2>
      <p class="text-gray-600 dark:text-gray-400">
        {{ isEditMode ? 'Update student personal details and identification' : 'Enter basic student details and identification. Fields marked * are required.' }}
      </p>
    </div>
  </div>

  <!-- Helpful Tips Alert -->
  <fuse-alert 
    *ngIf="!isEditMode"
    type="info" 
    appearance="soft"
    [showIcon]="true"
    class="mb-6">
    <strong>Getting Started:</strong> Begin with the student's legal names as they appear on official documents. 
    The admission number will be auto-generated if left empty. You can complete optional fields now or return later.
  </fuse-alert>

  <form [formGroup]="form" novalidate class="space-y-6">

    <!-- Name Details -->
    <mat-card class="shadow-md">
      <mat-card-header class="!pb-2">
        <mat-card-title class="!text-base !font-semibold flex items-center gap-2">
          <mat-icon svgIcon="heroicons_outline:identification" class="text-blue-600"></mat-icon>
          Full Name
          <span class="ml-auto text-xs font-medium px-2 py-1 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 rounded">Required</span>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content class="!pt-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>First Name *</mat-label>
            <input matInput formControlName="firstName" placeholder="e.g. John">
            <mat-icon matPrefix svgIcon="heroicons_outline:user" class="text-gray-400"></mat-icon>
            <mat-hint>As per birth certificate</mat-hint>
            <mat-error>{{ getErrorMessage('firstName') }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Middle Name</mat-label>
            <input matInput formControlName="middleName" placeholder="e.g. William">
            <mat-icon matPrefix svgIcon="heroicons_outline:user" class="text-gray-400"></mat-icon>
            <mat-hint>Optional</mat-hint>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Last Name *</mat-label>
            <input matInput formControlName="lastName" placeholder="e.g. Doe">
            <mat-icon matPrefix svgIcon="heroicons_outline:user" class="text-gray-400"></mat-icon>
            <mat-hint>Surname or family name</mat-hint>
            <mat-error>{{ getErrorMessage('lastName') }}</mat-error>
          </mat-form-field>

        </div>
      </mat-card-content>
    </mat-card>

    <!-- Birth Details -->
    <mat-card class="shadow-md">
      <mat-card-header class="!pb-2">
        <mat-card-title class="!text-base !font-semibold flex items-center gap-2">
          <mat-icon svgIcon="heroicons_outline:cake" class="text-blue-600"></mat-icon>
          Birth Information
          <span class="ml-auto text-xs font-medium px-2 py-1 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 rounded">Required</span>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content class="!pt-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          
          <!-- Date of Birth with validation -->
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Date of Birth *</mat-label>
            <input matInput [matDatepicker]="dobPicker" formControlName="dateOfBirth"
                   [min]="minDateOfBirth" [max]="maxDateOfBirth">
            <mat-datepicker-toggle matSuffix [for]="dobPicker"></mat-datepicker-toggle>
            <mat-datepicker #dobPicker></mat-datepicker>
            <mat-icon matPrefix svgIcon="heroicons_outline:calendar" class="text-gray-400"></mat-icon>
            <mat-hint>Student must be 2-25 years old</mat-hint>
            <mat-error>{{ getErrorMessage('dateOfBirth') }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Birth Certificate Number</mat-label>
            <input matInput formControlName="birthCertificateNumber" placeholder="e.g. 123456789">
            <mat-icon matPrefix svgIcon="heroicons_outline:document-text" class="text-gray-400"></mat-icon>
            <mat-hint>Optional - can be added later</mat-hint>
          </mat-form-field>

        </div>
      </mat-card-content>
    </mat-card>

    <!-- Basic Details -->
    <mat-card class="shadow-md">
      <mat-card-header class="!pb-2">
        <mat-card-title class="!text-base !font-semibold flex items-center gap-2">
          <mat-icon svgIcon="heroicons_outline:information-circle" class="text-blue-600"></mat-icon>
          Basic Details
          <span class="ml-auto text-xs font-medium px-2 py-1 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 rounded">Required</span>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content class="!pt-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Gender *</mat-label>
            <mat-select formControlName="gender">
              <mat-option value="">Select gender</mat-option>
              <mat-option *ngFor="let g of genders" [value]="g.value">
                {{ g.label }}
              </mat-option>
            </mat-select>
            <mat-icon matPrefix svgIcon="heroicons_outline:user-circle" class="text-gray-400"></mat-icon>
            <mat-error>Gender is required</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Nationality</mat-label>
            <input matInput formControlName="nationality" placeholder="e.g. Kenyan">
            <mat-icon matPrefix svgIcon="heroicons_outline:globe-alt" class="text-gray-400"></mat-icon>
            <mat-hint>Defaults to Kenyan</mat-hint>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Religion</mat-label>
            <input matInput formControlName="religion" placeholder="e.g. Christian, Muslim, Hindu">
            <mat-icon matPrefix svgIcon="heroicons_outline:book-open" class="text-gray-400"></mat-icon>
            <mat-hint>Optional - for records only</mat-hint>
          </mat-form-field>

        </div>
      </mat-card-content>
    </mat-card>

    <!-- Admission Details -->
    <mat-card class="shadow-md">
      <mat-card-header class="!pb-2">
        <mat-card-title class="!text-base !font-semibold flex items-center gap-2">
          <mat-icon svgIcon="heroicons_outline:clipboard-document-check" class="text-blue-600"></mat-icon>
          Admission Details
        </mat-card-title>
      </mat-card-header>
      <mat-card-content class="!pt-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Admission Number</mat-label>
            <input matInput formControlName="admissionNumber" placeholder="Auto-generated if empty">
            <mat-icon matPrefix svgIcon="heroicons_outline:hashtag" class="text-gray-400"></mat-icon>
            <mat-hint>{{ isEditMode ? 'Cannot be changed' : 'Leave blank to auto-generate' }}</mat-hint>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Date of Admission</mat-label>
            <input matInput [matDatepicker]="admissionPicker" formControlName="dateOfAdmission"
                   [min]="minDateOfAdmission" [max]="maxDateOfAdmission">
            <mat-datepicker-toggle matSuffix [for]="admissionPicker"></mat-datepicker-toggle>
            <mat-datepicker #admissionPicker></mat-datepicker>
            <mat-icon matPrefix svgIcon="heroicons_outline:calendar" class="text-gray-400"></mat-icon>
            <mat-hint>Defaults to today</mat-hint>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>NEMIS Number</mat-label>
            <input matInput formControlName="nemisNumber" placeholder="National student ID">
            <mat-icon matPrefix svgIcon="heroicons_outline:identification" class="text-gray-400"></mat-icon>
            <mat-hint>Can be added later</mat-hint>
          </mat-form-field>

        </div>
      </mat-card-content>
    </mat-card>

    <!-- CBC Level & Status -->
    <mat-card class="shadow-md">
      <mat-card-header class="!pb-2">
        <mat-card-title class="!text-base !font-semibold flex items-center gap-2">
          <mat-icon svgIcon="heroicons_outline:academic-cap" class="text-blue-600"></mat-icon>
          CBC Level & Status
          <span class="ml-auto text-xs font-medium px-2 py-1 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 rounded">Required</span>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content class="!pt-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>CBC Level *</mat-label>
            <mat-select formControlName="cbcLevel">
              <mat-option value="">Select level</mat-option>
              <mat-option *ngFor="let level of cbcLevels" [value]="level.value">
                {{ level.label }}
              </mat-option>
            </mat-select>
            <mat-icon matPrefix svgIcon="heroicons_outline:chart-bar" class="text-gray-400"></mat-icon>
            <mat-hint>Current competency-based curriculum level</mat-hint>
            <mat-error>CBC Level is required</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Student Status</mat-label>
            <mat-select formControlName="studentStatus">
              <mat-option *ngFor="let status of studentStatuses" [value]="status.value">
                {{ status.label }}
              </mat-option>
            </mat-select>
            <mat-icon matPrefix svgIcon="heroicons_outline:flag" class="text-gray-400"></mat-icon>
            <mat-hint>Defaults to "Continuing"</mat-hint>
          </mat-form-field>

        </div>
      </mat-card-content>
    </mat-card>

  </form>

</div>